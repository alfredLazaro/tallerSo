BACI System: C-- to PCODE Compiler, 12:29  18 Jul 2004
Source file: C:\jbaci\examples\trabajoGrup\trabajoGrupal.cm  Thu Oct 21 15:34:08 2021
 line  pc
   1    0  //prueba con git
   2    0  
   3    0  semaphore Administrador=1;
   4    0  semaphore Estudiante=1;
   5    0  semaphore adSale=0;
   6    0  semaphore estSale=0;
   7    0  int i=0;
   8    0  int total=5;
   9    0  int entra=1;
  10    0  void estudiante(int id){
  11    0  	wait(Estudiante);
  12    2  	if(i<5){  //se termina ejecutando el mismo proceso 11 veces
  13    6  
  14    6  	     cout<<"ESTUDIANTE "<<id<<"  entra en la habitacion"<<'\n';
  15   12  	    i++;
  16   17  	  signal(Estudiante); //no deberia entrar 
  17   19  	  //creo que es buena idea poner un estSal aqui
  18   19  		cout<<"Sssaaale estudiante "<<id<<" sale de la habitacion"<<'\n';
  19   25  		i--;
  20   30  	  	total--;
  21   35  	 }else{
  22   36  		entra=1;
  23   39  		if(total==0){
  24   43  			entra=0;
  25   46  			i=0; //esto 
  26   49  			signal(Administrador); //para que salga
  27   51  		}else{
  28   52  		signal(Administrador); //esta variable es depende //vuelve a llamar pero no deberia creo
  29   54  			wait(estSale);	
  30   56  	   cout<<"SSssale estudiante "<<id<<"  sale de la habitacion"<<'\n';	
  31   62  			//total tambien podria ponerse aqui?
  32   62  		}
  33   62  	} 
  34   62  	
  35   62  }
  36   63  
  37   63  void administrador(int id){
  38   63  	wait(Administrador);
  39   65  	
  40   65  	//while(1){
  41   65  	cout<<"		IAdministrador "<<id<<" intentaaaa ENTRAR"<<'\n';
  42   71  	wait(Estudiante); //se detiene el que estudiantes entren
  43   73  	if(entra=1 || i==0){ 
  44   81  	cout<<"         EAdministrador "<<id<<" entra en la habitacion"<<'\n'; //solo pasa
  45   87  	
  46   87  	if(total>0){ //en este caso i cumple en caso //siempre sera 11
  47   91  	
  48   91  	 if(i!=0){
  49   95  	  signal(estSale); //si no esta encendida -1
  50   97  	  cout<<"         RAdministrador "<<id<<" revisa la habitacion "<<'\n';
  51  103  	  signal(Estudiante); //por si hay estudiante que no terminaron
  52  105  	 }else{
  53  106  	  cout<<"         RAdministrador "<<id<<" revisa la habitacion "<<'\n';
  54  112  	  signal(Estudiante);
  55  114  	 }
  56  114  	 //cout<<"         RAdministrador "<<id<<" revisa la habitacion "<<'\n';
  57  114  	 total--;
  58  119  	}else{
  59  120  	 cout<<"         SAdministrador "<<id<<" sale de la habitacion "<<'\n';
  60  126  	 signal(Estudiante); //permite entrar estudiantes ya que salio
  61  128  	}
  62  128  	
  63  128  	}else{
  64  129  	cout<<" 	Administrador "<<id<<" no logra entrar "<<'\n';
  65  135  	signal(Estudiante);
  66  137  	}//entra
  67  137  	//}//while
  68  137  	
  69  137  }
  70  138  
  71  138  
  72  138  
  73  138  void main(){
  74  139  	cobegin{
  75  140  	estudiante(1);estudiante(2);estudiante(3);estudiante(4);estudiante(5);estudiante(6);
  76  164  	estudiante(7);estudiante(8);
  77  172  	estudiante(9);estudiante(10);estudiante(11);
  78  184  	administrador(99);
  79  188  	}
  80  189  }
